#:import KivyLexer kivy.extras.highlight.KivyLexer
#:import Factory kivy.factory.Factory
# ACNCversion 0.01

<DrawerClickableItem@MDNavigationDrawerItem>

<FirstNavigationDrawer>
    MDList:
        MDNavigationDrawerHeader:
            title: "OPEN PJM"
            text: "Project Management Contents"
            spacing: "4dp"
            padding: "12dp", 0, 0, "56dp"
        
        MDNavigationDrawerDivider:

        OneLineListItem:
            text: "Machine Information"
            on_press:
                root.one_drawer.set_state("close")
                root.screen_manager.current = "MachineInfo"


        DrawerClickableItem:
            adaptive_height: True
            adaptive_width: True
            icon: "information"
            text: "Screen 2"
            on_press:
                root.one_drawer.set_state("close")
                root.screen_manager.current = "scr 2"

<SecondNavigationDrawer>
    MDList:

        OneLineListItem:
            text: "Screen 3"
            on_press:
                root.two_drawer.set_state("close")
                root.screen_manager.current = "scr 3"

        OneLineListItem:
            text: "Screen 4"
            on_press:
                root.two_drawer.set_state("close")
                root.screen_manager.current = "scr 4"

<ThirdNavigationDrawer>
    MDList:
        MDNavigationDrawerHeader:
            title: "OPEN X"
            text: "new Contents"
            spacing: "4dp"
            padding: "12dp", 0, 0, "56dp"
        
        MDNavigationDrawerDivider:

        OneLineListItem:
            text: "Screen 1"
            on_press:
                root.three_drawer.set_state("close")
                root.screen_manager.current = "scr 1"


        DrawerClickableItem:
            adaptive_height: True
            adaptive_width: True
            icon: "information"
            text: "Screen 2"
            on_press:
                root.three_drawer.set_state("close")
                root.screen_manager.current = "scr 2"

<MachineInfoScreen>
    name: "MachineInfo"


ACNCScreen:
    screen_manager: screen_manager
    toolbar: toolbar
    size: root.width, root.height
    orientation: "vertical"
    #pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    #adaptive_height: True
    #md_bg_color: app.theme_cls.primary_color
    #MDBoxLayout:
        #orientation: "horizontal"
        #size_hint: 1, 0.1
        #pos_hint: {"center_x": .5, "center_y": 0.9}
    MDTopAppBar:
        id: toolbar
        use_overflow: True
        text: "Analyzer for CNC machines"        
        pos_hint: {"top": 1}
        size_hint_x: 1
        size_hint_y: 0.1
        left_action_items: [["home", lambda x: root.screen_manager.current == "MachineInfo"],["menu", lambda x: one_drawer.set_state("open")],["file", lambda x: two_drawer.set_state("open")],["devices"], ["developer-board"],["application-cog-outline"]]
        right_action_items: [["connection", lambda x:app.callback(x)],["transit-connection-variant", lambda x: app.callback(x)],["format-list-checkbox"], ["tools", lambda x: three_drawer.set_state("open")],["help"]]
        md_bg_color: toolbar.md_bg_color


    MDNavigationLayout:
        ScreenManager:
            id: screen_manager
            size_hint: 1, 0.9
            
            MachineInfoScreen:

            MDScreen:
                name: "scr 2"

                MDLabel:
                    text: "Screen 2"
                    halign: "center"

            MDScreen:
                name: "scr 3"

                MDLabel:
                    text: "Screen 3"
                    halign: "center"

            MDScreen:
                name: "scr 4"

                MDLabel:
                    text: "Screen 4"
                    halign: "center"

        MDNavigationDrawer:
            id: one_drawer
            radius: (0, 32, 16, 0)

            FirstNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: one_drawer
        
        MDNavigationDrawer:
            id: two_drawer
            radius: (0, 32, 16, 0)
            SecondNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: two_drawer
        
        MDNavigationDrawer:
            id: three_drawer
            radius: (0, 32, 16, 0)

            ThirdNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: three_drawer
